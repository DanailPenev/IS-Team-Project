
<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <meta charset="UTF-8">
  <title>A Basic Map</title>
  <style>
    #map {
      height: 100%;
    }
    /* Optional: Makes the sample page fill the window. */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>

  <script>
     function newMap(xml) {
      var mapOptions = {
          zoom: 5,
          center: new google.maps.LatLng(46.003257147967815399169921875, 8.95168307237327098846435546875),
          mapTypeId: 'roadmap'
      };
      var map = new google.maps.Map(document.getElementById('map'), mapOptions);
      var points = [];
        var bounds = new google.maps.LatLngBounds();
         $(xml).find("trkpt").each(function() {
                var lat = $(this).attr("lat");
                var lon = $(this).attr("lon");
                var p = new google.maps.LatLng(lat, lon);
                points.push(p);
                bounds.extend(p);
        });
         var poly = new google.maps.Polyline({
          path: points,
          strokeColor: '#FF00AA',
          strokeOpacity: .7,
          strokeWeight: 4
        });
        map.fitBounds(bounds);
        poly.setMap(map);
  }

   
  </script>
  <script>
  function initMap() {
    	var mapOptions = {
      		zoom: 5,
      		center: new google.maps.LatLng(46.003257147967815399169921875, 8.95168307237327098846435546875),
      		mapTypeId: 'roadmap'
    	};
    	var map = new google.maps.Map(document.getElementById('map'), mapOptions);
    	
  }
  		google.maps.event.addDomListener(window,'load',initMap)
  </script>
</head>
<body>
  <input type='file' accept=".xls,.xlsx,.gpx" onchange='openFile(event)'>
<div id="map"></div>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdPR19s4BzJWOP7Lu-pJhcxfpmQ4rbq7k&callback=initMap">
</script>
<script>
      var openFile = function(event) {
        var input = event.target;

        var reader = new FileReader();
        reader.onload = function() {
          var text = reader.result;
          newMap(text);
        };
        reader.readAsText(input.files[0]);
      };
  </script>
</body>
</html>